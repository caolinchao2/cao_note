import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.b5309610.js";const b=JSON.parse('{"title":"百度地图API","description":"","frontmatter":{},"headers":[],"relativePath":"other-note/百度地图API.md","filePath":"other-note/百度地图API.md","lastUpdated":null}'),p={name:"other-note/百度地图API.md"},o=l(`<h1 id="百度地图api" tabindex="-1">百度地图API <a class="header-anchor" href="#百度地图api" aria-label="Permalink to &quot;百度地图API&quot;">​</a></h1><blockquote><p>地址： <a href="http://lbsyun.baidu.com/" target="_blank" rel="noreferrer">http://lbsyun.baidu.com/</a>;</p></blockquote><h2 id="基本使用" tabindex="-1">基本使用 <a class="header-anchor" href="#基本使用" aria-label="Permalink to &quot;基本使用&quot;">​</a></h2><ol><li><p>设置meta</p><p>可以在meta标签添加user-scalable=no</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">meta</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">name</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;viewport&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">content</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;width=device-width, initial-scale=1.0,user-scalable=no&quot;</span><span style="color:#E1E4E8;">&gt;;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">meta</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">name</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;viewport&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">content</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;width=device-width, initial-scale=1.0,user-scalable=no&quot;</span><span style="color:#24292E;">&gt;;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>引入script</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">type</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;text/javascript&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;http://api.map.baidu.com/api?v=3.0&amp;ak=您的密钥&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;text/javascript&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;http://api.map.baidu.com/api?v=3.0&amp;ak=您的密钥&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>创建container容器，需要起id名；并设置相应的宽高；</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;container&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">id</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;container&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>基本配置;</p><ol><li><p>创建map实例： <code>new BMap.Map(&#39;container&#39;[,option]);</code></p><ul><li>第一个参数为id名，获取显示元素</li><li>第二个参数为对象： <ul><li>设置级别：<code>minZoom</code>:最小级别，<code>maxZoom</code>:最大级别；（设置之后将不允许用户缩放到最小最大的比例）；等级为3-19级；</li></ul></li></ul></li><li><p>初始化地图中心点：map.centerAndZoom(坐标|城市,等级)；</p><ul><li>如果是以坐标来设置中心点：需要实例化Point：<code>new BMap.Point(东经lng,北纬lat)</code></li><li>如果是以字符串表示的，不需要写等级，坐标表示必须写等级；</li></ul></li><li><p>初始化地图;</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> map </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">Map</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;container&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#6A737D;">//配置地图显示中心点和缩放等级;   //以坐标显示;</span></span>
<span class="line"><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">centerAndZoom</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">Point</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">116.404</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">39.915</span><span style="color:#E1E4E8;">), </span><span style="color:#79B8FF;">14</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> map </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">Map</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;container&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#6A737D;">//配置地图显示中心点和缩放等级;   //以坐标显示;</span></span>
<span class="line"><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">centerAndZoom</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">Point</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">116.404</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">39.915</span><span style="color:#24292E;">), </span><span style="color:#005CC5;">14</span><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol></li></ol><h2 id="鼠标放大" tabindex="-1">鼠标放大 <a class="header-anchor" href="#鼠标放大" aria-label="Permalink to &quot;鼠标放大&quot;">​</a></h2><p>默认双击放大，默认是不支持鼠标滚轮放大的， 开启鼠标滚轮放大：map.enableScrollWheelZoom(true)；</p><h2 id="添加多个控件" tabindex="-1">添加多个控件 <a class="header-anchor" href="#添加多个控件" aria-label="Permalink to &quot;添加多个控件&quot;">​</a></h2><ol><li><p>添加控件使用map.addControl()；</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">addControl</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">NavigationControl</span><span style="color:#E1E4E8;">());  </span><span style="color:#6A737D;">//平移缩放(左上)</span></span>
<span class="line"><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">addControl</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">ScaleControl</span><span style="color:#E1E4E8;">());    </span><span style="color:#6A737D;">//比例尺(左下)</span></span>
<span class="line"><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">addControl</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">OverviewMapControl</span><span style="color:#E1E4E8;">());  </span><span style="color:#6A737D;">//缩略地图(右下方，需要点击)</span></span>
<span class="line"><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">addControl</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">MapTypeControl</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">        mapTypes:[</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">BMAP_NORMAL_MAP</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">BMAP_HYBRID_MAP</span></span>
<span class="line"><span style="color:#E1E4E8;">        ]}));    </span><span style="color:#6A737D;">//地图类型(有卫星地图支持)</span></span>
<span class="line"><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">setCurrentCity</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;北京&quot;</span><span style="color:#E1E4E8;">); </span><span style="color:#6A737D;">// 仅当设置城市信息时，MapTypeControl的切换功能才能可用，必须添加；</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">addControl</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">NavigationControl</span><span style="color:#24292E;">());  </span><span style="color:#6A737D;">//平移缩放(左上)</span></span>
<span class="line"><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">addControl</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">ScaleControl</span><span style="color:#24292E;">());    </span><span style="color:#6A737D;">//比例尺(左下)</span></span>
<span class="line"><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">addControl</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">OverviewMapControl</span><span style="color:#24292E;">());  </span><span style="color:#6A737D;">//缩略地图(右下方，需要点击)</span></span>
<span class="line"><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">addControl</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">MapTypeControl</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">        mapTypes:[</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">BMAP_NORMAL_MAP</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#005CC5;">BMAP_HYBRID_MAP</span></span>
<span class="line"><span style="color:#24292E;">        ]}));    </span><span style="color:#6A737D;">//地图类型(有卫星地图支持)</span></span>
<span class="line"><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">setCurrentCity</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;北京&quot;</span><span style="color:#24292E;">); </span><span style="color:#6A737D;">// 仅当设置城市信息时，MapTypeControl的切换功能才能可用，必须添加；</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p>移动地图控件的位置：</p><p>初始化地图控件时，在小括号里添加一个对象，并设置anchor:值；</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">BMAP_ANCHOR_TOP_LEFT</span><span style="color:#E1E4E8;">：左上角</span></span>
<span class="line"><span style="color:#79B8FF;">BMAP_ANCHOR_TOP_RIGHT</span><span style="color:#E1E4E8;">：右上角</span></span>
<span class="line"><span style="color:#79B8FF;">BMAP_ANCHOR_BOTTOM_LEFT</span><span style="color:#E1E4E8;">：左下角</span></span>
<span class="line"><span style="color:#79B8FF;">BMAP_ANCHOR_BOTTOM_RIGHT</span><span style="color:#E1E4E8;">：右下角</span></span>
<span class="line"><span style="color:#E1E4E8;">地图偏移：</span><span style="color:#B392F0;">offset</span><span style="color:#E1E4E8;">: </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">Size</span><span style="color:#E1E4E8;">(x,y)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">BMAP_ANCHOR_TOP_LEFT</span><span style="color:#24292E;">：左上角</span></span>
<span class="line"><span style="color:#005CC5;">BMAP_ANCHOR_TOP_RIGHT</span><span style="color:#24292E;">：右上角</span></span>
<span class="line"><span style="color:#005CC5;">BMAP_ANCHOR_BOTTOM_LEFT</span><span style="color:#24292E;">：左下角</span></span>
<span class="line"><span style="color:#005CC5;">BMAP_ANCHOR_BOTTOM_RIGHT</span><span style="color:#24292E;">：右下角</span></span>
<span class="line"><span style="color:#24292E;">地图偏移：</span><span style="color:#6F42C1;">offset</span><span style="color:#24292E;">: </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">Size</span><span style="color:#24292E;">(x,y)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>NavigationControl控件的控制： <a href="http://lbsyun.baidu.com/index.php?title=jspopular3.0/guide/widget" target="_blank" rel="noreferrer">http://lbsyun.baidu.com/index.php?title=jspopular3.0/guide/widget</a></p></li></ol><h2 id="隐藏一部分" tabindex="-1">隐藏一部分 <a class="header-anchor" href="#隐藏一部分" aria-label="Permalink to &quot;隐藏一部分&quot;">​</a></h2><p>如果想要隐藏地图中的某一部分，可以通过f12查询到，之后设置display:none;隐藏；</p><h2 id="移动地图" tabindex="-1">移动地图 <a class="header-anchor" href="#移动地图" aria-label="Permalink to &quot;移动地图&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">panTo</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">Point</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">113.262232</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">23.154345</span><span style="color:#E1E4E8;">));</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">panTo</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">Point</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">113.262232</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">23.154345</span><span style="color:#24292E;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>可以加到定时器里面，规定什么时候开始移动；</p><h2 id="缩放地图" tabindex="-1">缩放地图 <a class="header-anchor" href="#缩放地图" aria-label="Permalink to &quot;缩放地图&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">setZoom</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">14</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">setZoom</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">14</span><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="地图的拖动" tabindex="-1">地图的拖动： <a class="header-anchor" href="#地图的拖动" aria-label="Permalink to &quot;地图的拖动：&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">disableDragging</span><span style="color:#E1E4E8;">();  </span><span style="color:#6A737D;">// 禁止拖拽</span></span>
<span class="line"><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">enableDragging</span><span style="color:#E1E4E8;">(); </span><span style="color:#6A737D;">// 开启拖拽</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">disableDragging</span><span style="color:#24292E;">();  </span><span style="color:#6A737D;">// 禁止拖拽</span></span>
<span class="line"><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">enableDragging</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// 开启拖拽</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="自定义一个控件" tabindex="-1">自定义一个控件 <a class="header-anchor" href="#自定义一个控件" aria-label="Permalink to &quot;自定义一个控件&quot;">​</a></h2><ol><li>获取地图容器：map.getContainer();</li><li>调用map.addControl()方法时，会调用该对象的initialize方法，所以自定义控件需要添加该方法；</li><li>创建的自定义控件必须返回元素；</li></ol><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ZoomControl</span><span style="color:#E1E4E8;">(){</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.defaultAnchor </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">BMAP_ANCHOR_BOTTOM_RIGHT</span><span style="color:#E1E4E8;">;  </span><span style="color:#6A737D;">//设置默认停靠位置</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.defaultOffset </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">Size</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">);  </span><span style="color:#6A737D;">//默认偏移量</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#79B8FF;">ZoomControl</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">prototype</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">Control</span><span style="color:#E1E4E8;">();  </span><span style="color:#6A737D;">//父类的实例赋值给子类的原型;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//创建initialize方法，并返回</span></span>
<span class="line"><span style="color:#79B8FF;">ZoomControl</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">prototype</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">initialize</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">map</span><span style="color:#E1E4E8;">){    </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> div </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">createElement</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;div&quot;</span><span style="color:#E1E4E8;">);    </span></span>
<span class="line"><span style="color:#E1E4E8;">    div.innerHTML </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;放大两级&#39;</span><span style="color:#E1E4E8;">;    </span><span style="color:#6A737D;">// 添加文字说明</span></span>
<span class="line"><span style="color:#E1E4E8;">    div.style </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;cursor:pointer;border:1px solid gray;background:red&#39;</span><span style="color:#E1E4E8;">;  </span><span style="color:#6A737D;">//设置元素样式；</span></span>
<span class="line"><span style="color:#E1E4E8;">    div.</span><span style="color:#B392F0;">onclick</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">){ </span><span style="color:#6A737D;">//添加事件;</span></span>
<span class="line"><span style="color:#E1E4E8;">        map.</span><span style="color:#B392F0;">zoomTo</span><span style="color:#E1E4E8;">(map.</span><span style="color:#B392F0;">getZoom</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">); </span><span style="color:#6A737D;">//+2表示点击一次放大两级; </span></span>
<span class="line"><span style="color:#E1E4E8;">    }    </span></span>
<span class="line"><span style="color:#E1E4E8;">    map.</span><span style="color:#B392F0;">getContainer</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">appendChild</span><span style="color:#E1E4E8;">(div);   </span><span style="color:#6A737D;">// 添加DOM元素到地图中  </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 将DOM元素返回  </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> div;    </span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//添加控件</span></span>
<span class="line"><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">addControl</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ZoomControl</span><span style="color:#E1E4E8;">());</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ZoomControl</span><span style="color:#24292E;">(){</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.defaultAnchor </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">BMAP_ANCHOR_BOTTOM_RIGHT</span><span style="color:#24292E;">;  </span><span style="color:#6A737D;">//设置默认停靠位置</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.defaultOffset </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">Size</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">);  </span><span style="color:#6A737D;">//默认偏移量</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#005CC5;">ZoomControl</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">prototype</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">Control</span><span style="color:#24292E;">();  </span><span style="color:#6A737D;">//父类的实例赋值给子类的原型;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//创建initialize方法，并返回</span></span>
<span class="line"><span style="color:#005CC5;">ZoomControl</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">prototype</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">initialize</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;">(</span><span style="color:#E36209;">map</span><span style="color:#24292E;">){    </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> div </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> document.</span><span style="color:#6F42C1;">createElement</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;div&quot;</span><span style="color:#24292E;">);    </span></span>
<span class="line"><span style="color:#24292E;">    div.innerHTML </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;放大两级&#39;</span><span style="color:#24292E;">;    </span><span style="color:#6A737D;">// 添加文字说明</span></span>
<span class="line"><span style="color:#24292E;">    div.style </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;cursor:pointer;border:1px solid gray;background:red&#39;</span><span style="color:#24292E;">;  </span><span style="color:#6A737D;">//设置元素样式；</span></span>
<span class="line"><span style="color:#24292E;">    div.</span><span style="color:#6F42C1;">onclick</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;">(</span><span style="color:#E36209;">e</span><span style="color:#24292E;">){ </span><span style="color:#6A737D;">//添加事件;</span></span>
<span class="line"><span style="color:#24292E;">        map.</span><span style="color:#6F42C1;">zoomTo</span><span style="color:#24292E;">(map.</span><span style="color:#6F42C1;">getZoom</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">); </span><span style="color:#6A737D;">//+2表示点击一次放大两级; </span></span>
<span class="line"><span style="color:#24292E;">    }    </span></span>
<span class="line"><span style="color:#24292E;">    map.</span><span style="color:#6F42C1;">getContainer</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">appendChild</span><span style="color:#24292E;">(div);   </span><span style="color:#6A737D;">// 添加DOM元素到地图中  </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 将DOM元素返回  </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> div;    </span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">//添加控件</span></span>
<span class="line"><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">addControl</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ZoomControl</span><span style="color:#24292E;">());</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="使用编辑的样式" tabindex="-1">使用编辑的样式 <a class="header-anchor" href="#使用编辑的样式" aria-label="Permalink to &quot;使用编辑的样式&quot;">​</a></h2><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">setMapStyleV2</span><span style="color:#E1E4E8;">({     </span></span>
<span class="line"><span style="color:#E1E4E8;">  styleId: </span><span style="color:#9ECBFF;">&#39;3d71dc5a4ce6222d3396801dee06622d&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">setMapStyleV2</span><span style="color:#24292E;">({     </span></span>
<span class="line"><span style="color:#24292E;">  styleId: </span><span style="color:#032F62;">&#39;3d71dc5a4ce6222d3396801dee06622d&#39;</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="自定义标注点" tabindex="-1">自定义标注点 <a class="header-anchor" href="#自定义标注点" aria-label="Permalink to &quot;自定义标注点&quot;">​</a></h2><ol><li>标注点自定义图标：new BMap.Icon(url,size,[,option])：地址，大小创建图标对象；</li></ol><p>options：anchor : size；左上角偏移值；</p><p>imageOffset : size；可视区域的偏移值；等同于background-position；</p><p>imageSize : size；图片的大小，等同于background-size；</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> marker </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">Marker</span><span style="color:#E1E4E8;">(point, {</span></span>
<span class="line"><span style="color:#E1E4E8;">    icon: </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">Icon</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;./2.png&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">Size</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">86</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">72</span><span style="color:#E1E4E8;">), {</span></span>
<span class="line"><span style="color:#E1E4E8;">        imageSize: </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">Size</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        })</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">addOverlay</span><span style="color:#E1E4E8;">(marker);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> marker </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">Marker</span><span style="color:#24292E;">(point, {</span></span>
<span class="line"><span style="color:#24292E;">    icon: </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">Icon</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;./2.png&#39;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">Size</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">86</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">72</span><span style="color:#24292E;">), {</span></span>
<span class="line"><span style="color:#24292E;">        imageSize: </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">Size</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">25</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">25</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        })</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">addOverlay</span><span style="color:#24292E;">(marker);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="2"><li>new BMap.Size(w,h)：没有单位，像素表示矩形区域的大小；</li></ol><h2 id="添加定位相关控件" tabindex="-1">添加定位相关控件 <a class="header-anchor" href="#添加定位相关控件" aria-label="Permalink to &quot;添加定位相关控件&quot;">​</a></h2><ol><li><p>初始化NavigationControl控件，并添加<code>enableGeolocation: true</code></p><p><code>map.addControl(new BMap.NavigationControl({enableGeolocation:true}))</code></p></li><li><p>添加定位事件</p></li></ol><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> geolocationControl </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">GeolocationControl</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">geolocationControl.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;locationSuccess&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#6A737D;">// 定位成功事件</span></span>
<span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> address </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">address </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> e.addressComponent.province;</span></span>
<span class="line"><span style="color:#E1E4E8;">address </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> e.addressComponent.city;</span></span>
<span class="line"><span style="color:#E1E4E8;">address </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> e.addressComponent.district;</span></span>
<span class="line"><span style="color:#E1E4E8;">address </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> e.addressComponent.street;</span></span>
<span class="line"><span style="color:#E1E4E8;">address </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> e.addressComponent.streetNumber;</span></span>
<span class="line"><span style="color:#B392F0;">alert</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;当前定位地址为：&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> address);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"><span style="color:#E1E4E8;">geolocationControl.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;locationError&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#6A737D;">// 定位失败事件</span></span>
<span class="line"><span style="color:#B392F0;">alert</span><span style="color:#E1E4E8;">(e.message);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"><span style="color:#E1E4E8;">map.</span><span style="color:#B392F0;">addControl</span><span style="color:#E1E4E8;">(geolocationControl);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> geolocationControl </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">GeolocationControl</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">geolocationControl.</span><span style="color:#6F42C1;">addEventListener</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;locationSuccess&quot;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">function</span><span style="color:#24292E;">(</span><span style="color:#E36209;">e</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#6A737D;">// 定位成功事件</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> address </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">address </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> e.addressComponent.province;</span></span>
<span class="line"><span style="color:#24292E;">address </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> e.addressComponent.city;</span></span>
<span class="line"><span style="color:#24292E;">address </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> e.addressComponent.district;</span></span>
<span class="line"><span style="color:#24292E;">address </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> e.addressComponent.street;</span></span>
<span class="line"><span style="color:#24292E;">address </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> e.addressComponent.streetNumber;</span></span>
<span class="line"><span style="color:#6F42C1;">alert</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;当前定位地址为：&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> address);</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"><span style="color:#24292E;">geolocationControl.</span><span style="color:#6F42C1;">addEventListener</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;locationError&quot;</span><span style="color:#24292E;">,</span><span style="color:#D73A49;">function</span><span style="color:#24292E;">(</span><span style="color:#E36209;">e</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#6A737D;">// 定位失败事件</span></span>
<span class="line"><span style="color:#6F42C1;">alert</span><span style="color:#24292E;">(e.message);</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"><span style="color:#24292E;">map.</span><span style="color:#6F42C1;">addControl</span><span style="color:#24292E;">(geolocationControl);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="获取定位" tabindex="-1">获取定位 <a class="header-anchor" href="#获取定位" aria-label="Permalink to &quot;获取定位&quot;">​</a></h2><h3 id="浏览器定位" tabindex="-1">浏览器定位 <a class="header-anchor" href="#浏览器定位" aria-label="Permalink to &quot;浏览器定位&quot;">​</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> geolocation </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">Geolocation</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">geolocation.</span><span style="color:#B392F0;">getCurrentPosition</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">r</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">getStatus</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">BMAP_STATUS_SUCCESS</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// 请求逆地理编码的全球接口, 获取cityCode和具体的位置, 需要下载ajax, 因为会跨域</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> url </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`http://api.map.baidu.com/reverse_geocoding/v3/?ak=iYWapWxjHLXaLTCXcpRrGTCGpnhkvEuI&amp;output=json&amp;coordtype=wgs84ll&amp;location=\${</span><span style="color:#E1E4E8;">r</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">point</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">lat</span><span style="color:#9ECBFF;">},\${</span><span style="color:#E1E4E8;">r</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">point</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">lng</span><span style="color:#9ECBFF;">}\`</span></span>
<span class="line"><span style="color:#E1E4E8;">    $.</span><span style="color:#B392F0;">ajax</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">      dataType: </span><span style="color:#9ECBFF;">&#39;jsonp&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      url,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">success</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">res</span><span style="color:#E1E4E8;">){</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// 将地地图的中心点跳转到获取的经纬度</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> mk </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">Marker</span><span style="color:#E1E4E8;">(r.point);</span></span>
<span class="line"><span style="color:#E1E4E8;">        map.</span><span style="color:#B392F0;">addOverlay</span><span style="color:#E1E4E8;">(mk);</span></span>
<span class="line"><span style="color:#E1E4E8;">        map.</span><span style="color:#B392F0;">panTo</span><span style="color:#E1E4E8;">(r.point);</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(res, </span><span style="color:#9ECBFF;">&#39;result&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">alert</span><span style="color:#E1E4E8;">(res.result.formatted_address)</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">alert</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;failed&#39;</span><span style="color:#F97583;">+</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">getStatus</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">  }        </span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> geolocation </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">Geolocation</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">geolocation.</span><span style="color:#6F42C1;">getCurrentPosition</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">function</span><span style="color:#24292E;">(</span><span style="color:#E36209;">r</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">getStatus</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">BMAP_STATUS_SUCCESS</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// 请求逆地理编码的全球接口, 获取cityCode和具体的位置, 需要下载ajax, 因为会跨域</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> url </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`http://api.map.baidu.com/reverse_geocoding/v3/?ak=iYWapWxjHLXaLTCXcpRrGTCGpnhkvEuI&amp;output=json&amp;coordtype=wgs84ll&amp;location=\${</span><span style="color:#24292E;">r</span><span style="color:#032F62;">.</span><span style="color:#24292E;">point</span><span style="color:#032F62;">.</span><span style="color:#24292E;">lat</span><span style="color:#032F62;">},\${</span><span style="color:#24292E;">r</span><span style="color:#032F62;">.</span><span style="color:#24292E;">point</span><span style="color:#032F62;">.</span><span style="color:#24292E;">lng</span><span style="color:#032F62;">}\`</span></span>
<span class="line"><span style="color:#24292E;">    $.</span><span style="color:#6F42C1;">ajax</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      dataType: </span><span style="color:#032F62;">&#39;jsonp&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      url,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">success</span><span style="color:#24292E;">(</span><span style="color:#E36209;">res</span><span style="color:#24292E;">){</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// 将地地图的中心点跳转到获取的经纬度</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> mk </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">Marker</span><span style="color:#24292E;">(r.point);</span></span>
<span class="line"><span style="color:#24292E;">        map.</span><span style="color:#6F42C1;">addOverlay</span><span style="color:#24292E;">(mk);</span></span>
<span class="line"><span style="color:#24292E;">        map.</span><span style="color:#6F42C1;">panTo</span><span style="color:#24292E;">(r.point);</span></span>
<span class="line"><span style="color:#24292E;">        </span></span>
<span class="line"><span style="color:#24292E;">        console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(res, </span><span style="color:#032F62;">&#39;result&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">alert</span><span style="color:#24292E;">(res.result.formatted_address)</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">alert</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;failed&#39;</span><span style="color:#D73A49;">+</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">getStatus</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">  }        </span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="ip定位" tabindex="-1">ip定位 <a class="header-anchor" href="#ip定位" aria-label="Permalink to &quot;ip定位&quot;">​</a></h3><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> BMap.</span><span style="color:#B392F0;">LocalCity</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">result</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(result)</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">new</span><span style="color:#24292E;"> BMap.</span><span style="color:#6F42C1;">LocalCity</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#E36209;">result</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(result)</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>`,37),e=[o];function r(t,c,E,y,i,d){return a(),n("div",null,e)}const F=s(p,[["render",r]]);export{b as __pageData,F as default};
